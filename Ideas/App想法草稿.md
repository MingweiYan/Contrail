# App 要求
## 功能要求

核心目标：这个应用的核心目标是追踪用户的习惯，记录用户在每个习惯上花费的时间


应该支持的功能：
1. 习惯管理
    - 用户可以创建、编辑和删除习惯
    - 每个习惯都有一个名称、图标，追踪次数，追踪天数
    - 习惯可以设置是否追踪时间，如果不追踪时间那么只有次数会被记录
    - 次数和天数可以设置目标，也可以不设置，目标可以正向目标，即想要达到的结果是超过这个目标，也可以是反向目标，即想要达到的结果是低于这个目标

2. 习惯追踪
    - 用户可以在应用中开始追踪一个习惯
    - 用户可以选择正计时，番茄钟，倒计时等方式来追踪习惯
    - 开始最终会根据选择的追踪方式，出现正计时，倒计时等界面，用户随时可以选择终止计时，并且弹出提醒是否保存这次追踪
    - 每次追踪习惯时，要想方法防止系统杀死 APP，保证习惯最终的准确性
    - 每次用户选择保存追踪，会将该习惯在这一天的追踪次数加一，同时更新追踪的天数
    - 用户可以随时补充一次追钟，补充追踪的效果和正常通过习惯进行追踪的效果一致

3. 习惯统计
    - 每个习惯记录用户在当前系统上每次追踪的内容
    - 每个习惯可以在周、月、年日历上显示对应的完成情况，完成通过图标或者高亮来显示
    - 每个习惯支持按照，周，月，年来展示折线图等变化情况
    - 支持在一个折现图中展示多个习惯的按周，月，年等变化的情况
    - 支持按照周，月，年周期中，各个习惯在饼状图中的占比

4. 通知功能
    - 如果用户打开了软件中的通知开关，并且用户设置了习惯的目标，那么会每周，每月，每年，发送一次通知，通知的内容是用户习惯的进度情况，以及相比之前几个周期的变化情况

## 其他要求

1. 系统美化
    - 整个系统的背景允许自定义，用户可以选择自己喜欢的背景颜色，允许用户使用自定义图片
    - 支持用户自定义字体，用户可以选择自己喜欢的字体，并且可以在应用中使用
    - 支持用户自定义图标，用户可以选择自己喜欢的图标，并且可以在应用中使用

2. 系统安全
    - 所有数据默认加密保存
    - 支持用户备份数据，通过 webDav 备份数据
    - 支持用户恢复数据，通过 webDav 恢复数据
    - 支持用户导出数据，导出的数据按照 json 存储

    
## 系统界面

整个 App 最下方有多个 Tab，通过 Tab 切换到不同的页面，每个页面都有自己的功能，用户可以在不同的页面之间切换，来完成不同的功能。

每个Tab的功能如下：
1. 习惯Tab
整个页面参考下图
 ![习惯管理页面.png](./习惯界面.png)
具体的一些细节如下：
- 每个习惯是一个长条状的卡片，用户可以长按卡片弹出「新建习惯页面」，不过实现的是修改功能
- 习惯卡片有一个图片背景，通过在「新建习惯页面」指定
- 习惯卡片的最右端是一个开始按钮，点击后会弹出来「专注选择页面」，专注选择页面的需求在下面描述；如果习惯没有设置追踪时间，那么显示的打卡的字样
- 习惯卡片左上角是大写字体高亮的习惯名称，支持 emoji 等图标
- 如果当前习惯设置了目标，习惯名称下方是当前习惯所有目标的目标值，以及一个环形的完成百分比
- 在长条状的卡片上左滑，长条会出现删除的的字样，然后弹出来确认删除的界面，只有在用户确认删除后才会删除
- 最右下方有一个+号图标，点击后出现新建习惯的页面，完成后保存习惯
- 右上角有一个按钮，可以补充打卡，点击后会出现补充打卡的页面，补充打卡可以选择习惯，如果习惯设置了追踪时间，那么出现填写习惯追踪时间的输入框

1.1 新建习惯页面
    - 多个部分组成，第一部分是要求输入习惯的名称
    - 第二部分 允许用户从现有的图片库中选择一个图片作为习惯背景，允许用户自己使用本地图片作为背景
    - 第三部分用户选择习惯周期，设计一个多选框，下面的每次选择都可以选择正向目标或者负向目标，目标支持次数和时间
        - 按照固定时间，会出现一、二、三一直到七的选择框，高亮用户选择，例如用户选择了一和三，代表每周一和每周三需要完成目标
        - 按照每周，出现一个数字框，表示每周多少天需要完成目标
        - 按照每月，出现一个数字框，表示每周多少天需要完成目标
        - 按照每隔几天，出现一个数字框，表示每隔几天完成需要完成目标

1.2 专注选择页面
    - 并列展示支持正计时，番茄钟，倒计时等三种专注模型
    - 正计时展示一个时钟选项，开始从 0 开始计时，允许更换时钟的样式
    - 倒计时展示一个时钟选项，用户可以上下滑动，修改计时的时间
    - 番茄钟展示一个时钟选项，用于调节一轮番茄钟的时间，增加一个设置的按钮，用于设置番茄钟的休息间隔，次数等
    - 最下面一个按钮是开始专注，点击按钮后进入「专注页面」

1.3 专注页面
    参考![专注页面.png](./专注界面.png)
    - 按照专注类型出现一个时钟，基本同专注选择页面
    - 支持更换时钟的样式
    - 有一个暂停和结束的按钮，暂停后修改为恢复，结束后保存这段专注
    - 支持自定义背景图片，支持常亮，默认点击后进入全屏时钟的页面，再点击一次返回


2. 统计Tab

整个页面分成几部分

专注追踪，页面组织上呈现多个块，每个块的功能如下：

- 支持按周，月，年进行追踪习惯的次数，展现出一个折线图
- 支持一个饼状图，按周，月，年展示每个习惯在追踪次数和时间的占比
- 支持下滑选择选择习惯，可以选择年月进行展示
    - 如果是年，那么展示这个习惯的热力图
    - 如果是月，显示一个日历展示用户当前月完成的习惯情况
- 一个日历组件，按照周或者月进行切换，在每一天上，展示已经完成的目标



    